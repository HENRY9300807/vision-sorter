# GitHub 실시간 동기화 사용법

로컬 `analysis_color` 디렉토리와 GitHub 레포지토리(`HENRY9300807/vision-sorter`)를 실시간으로 동기화합니다.

## 기능

- ✅ **자동 감지**: 로컬 파일 변경사항을 자동으로 감지
- ✅ **자동 커밋**: 변경된 파일을 자동으로 Git에 커밋
- ✅ **자동 푸시**: GitHub에 자동으로 푸시
- ✅ **자동 Pull**: GitHub의 변경사항을 주기적으로 가져옴
- ✅ **양방향 동기화**: 로컬 ↔ GitHub 양방향 동기화

## 사전 준비

### 1. Git 저장소 초기화 (아직 안 했다면)

```bash
cd C:\Users\kn666\OneDrive\Desktop\analysis_color
git init
git remote add origin https://github.com/HENRY9300807/vision-sorter.git
```

### 2. 필요한 패키지 설치

```bash
pip install watchdog
```

또는

```bash
pip install -r requirements-optional.txt
```

### 3. Git 사용자 정보 설정 (처음 한 번만)

```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

## 사용 방법

### 기본 실행

```bash
package\github_bridge\run_sync.bat
```

또는 직접 실행:

```bash
python package\github_bridge\sync_realtime.py
```

### 옵션

```bash
# 동기화 간격 조정 (기본값: 5초)
python package\github_bridge\sync_realtime.py --sync-interval 10

# Pull 간격 조정 (기본값: 60초)
python package\github_bridge\sync_realtime.py --pull-interval 120

# 자동 푸시 비활성화 (커밋만 수행)
python package\github_bridge\sync_realtime.py --no-push

# 자동 Pull 비활성화
python package\github_bridge\sync_realtime.py --no-pull

# 여러 옵션 조합
python package\github_bridge\sync_realtime.py --sync-interval 10 --pull-interval 120
```

## 동작 방식

1. **파일 감시**: `watchdog`을 사용하여 로컬 디렉토리의 모든 파일 변경사항을 감지
2. **변경사항 수집**: 지정된 시간(기본 5초) 동안 변경사항을 모음
3. **자동 커밋**: 변경된 파일들을 Git에 자동 커밋
4. **자동 푸시**: GitHub에 자동으로 푸시
5. **주기적 Pull**: 지정된 시간(기본 60초)마다 GitHub에서 변경사항을 가져옴

## 무시되는 파일/디렉토리

다음 항목들은 자동으로 무시됩니다:

- `.git/`
- `.venv/`
- `__pycache__/`
- `*.pyc`, `*.pyo`, `*.pyd`
- `.pytest_cache/`, `.mypy_cache/`
- `node_modules/`
- `.idea/`, `.vscode/`
- `picture/` (이미지 파일)
- `data/` (데이터 파일)

## 주의사항

1. **충돌 처리**: GitHub에서 변경사항을 가져올 때 충돌이 발생하면 수동으로 해결해야 합니다.
2. **대용량 파일**: 큰 파일(이미지, 데이터 등)은 자동으로 제외되지만, 필요시 `sync_realtime.py`의 `IGNORE_PATTERNS`를 수정하세요.
3. **네트워크**: 인터넷 연결이 필요합니다.
4. **GitHub 인증**: 푸시를 위해서는 GitHub 인증이 필요합니다 (Personal Access Token 또는 SSH 키).

## GitHub 인증 설정

### Personal Access Token 사용

1. GitHub → Settings → Developer settings → Personal access tokens → Tokens (classic)
2. 새 토큰 생성 (권한: `repo`)
3. 토큰을 환경변수로 설정:

```bash
# Windows PowerShell
$env:GITHUB_TOKEN = "your_token_here"

# Windows CMD
set GITHUB_TOKEN=your_token_here
```

또는 Git Credential Manager 사용:

```bash
git config --global credential.helper manager-core
```

### SSH 키 사용

```bash
# SSH 키 생성 (아직 없다면)
ssh-keygen -t ed25519 -C "your_email@example.com"

# GitHub에 SSH 키 추가
# GitHub → Settings → SSH and GPG keys → New SSH key
```

## 문제 해결

### "Git 저장소가 아닙니다" 오류

```bash
cd C:\Users\kn666\OneDrive\Desktop\analysis_color
git init
```

### "원격 저장소가 설정되지 않았습니다" 경고

```bash
git remote add origin https://github.com/HENRY9300807/vision-sorter.git
```

### 푸시 실패

- GitHub 인증 확인
- 네트워크 연결 확인
- 브랜치 이름 확인 (`main` 또는 `master`)

### Pull 실패 (충돌)

```bash
# 수동으로 충돌 해결
git status
git pull origin main
# 충돌 파일 수정 후
git add .
git commit -m "Resolve conflicts"
```

## 종료

`Ctrl+C`를 눌러 동기화를 중지합니다.

## 예시

```bash
# 기본 실행 (5초마다 커밋, 60초마다 pull)
package\github_bridge\run_sync.bat

# 더 빠른 동기화 (2초마다 커밋, 30초마다 pull)
python package\github_bridge\sync_realtime.py --sync-interval 2 --pull-interval 30

# 커밋만 하고 푸시는 수동으로
python package\github_bridge\sync_realtime.py --no-push
```

